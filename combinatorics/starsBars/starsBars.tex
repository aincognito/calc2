\documentclass[handout]{ximera}

\input{../preamble}

\pgfplotsset{compat=1.13}

\outcome{Define and enumerate combinations of multisets}

\title{1.7 Stars and Bars}

\begin{document}

\begin{abstract}
We define and enumerate combinations of multisets.
\end{abstract}

\maketitle





\section{Multisets}

\begin{definition}[Multiset]
A multiset is a set in which one or more of the elements is repeated.  Multisets are typically denoted by listing the elements  of the set together with their repetition numbers:
\[
S = \{n_1 \cdot a_1, n_2 \cdot a_2, \ldots, n_k \cdot a_k\}
\]
 Here, there are $k$ distinct elements of the set: $a_1, a_2, \ldots, a_k$
 and their corresponding repetition numbers are $n_1, n_2, ..., n_k$.
 The total number of elements in the set (including repetition) is $|S| = n_1 + n_2 + \cdots + n_k$.
 \end{definition}
 
 \begin{remark} 
 We allow repetition numbers to be $\infty$, in which case, we have $|S| = \infty$.
 \end{remark}
 
 At the end of section 1.5, we computed the number of permutations of words that had letters repeated.  In effect, we computed the number of permutations of the elements of a multiset. In general, the number of permutations of the 
 multiset $S = \{n_1 \cdot a_1, n_2 \cdot a_2, \ldots, n_k \cdot a_k\}$ is
 \[
 \frac{n!}{n_1! n_2! \cdots n_k!}
 \]
 where $n = |S| = n_1 + n_2 + \cdots + n_k$.
 
 We now turn to counting combinations of multisets.
 

\section{Combinations of Multisets}

\begin{example}[example 1]
A convenience store sells donuts of three types: chocolate, jelly and glazed.  If each type is in abundant supply,
how many ways are there to select half a dozen donuts?\\
First, the order of selection of the donuts is not important, so we are discussing combinations here, not permutations.
Next, since each type of donut is in abundant supply, we can assume that the set of available donuts is a multiset with repetition numbers $\infty$,
i.e. $S = \{\infty \cdot C, \infty \cdot J, \infty \cdot G\}$, where C stands for chocolate, J for jelly and G for glazed.
To compute the number of combinations of 6 elements of this multiset, consider the following string of stars and bars:
\[
**|*|***
\]
This symbolic representation of stars and bars corresponds to a selection of 6 donuts: namely 2 chocolate, 1 jelly and 3 glazed. The vertical bars act as separators between the types of donuts, represented by the stars. Other examples include
\[
**|****|, \;\;\; |******|, \;\; \mbox{and} \;\; ******||
\]
which correspond to 2C, 4J; 6J; and 6C respectively. Thus the total number of ways to select half a dozen donuts 
corresponds to the number of ways to arrange the 6 stars and 2 bars. We can count this according to our method of permutations of multisets, mentioned above, or by using combinations of 8 objects taken 6 at a time. In either case, we 
arrive at the conclusion that the number of ways to select half a dozen donuts at this convenience store is
\[
C(8,6) = \frac{8!}{6! 2!} = 28
\]
 
\end{example}


\begin{problem}(problem 1)
A bakery has 5 types of donuts, each in abundant supply. How many ways are there to select a dozen donuts?
$\; \answer{1820}$
\end{problem}
 

\begin{example}[example 2]
A convenience store sells donuts of three types: chocolate, jelly and glazed.  If the store has only 4 chocolate donuts available with the other two types being in abundant supply, how many ways are there to select half a dozen donuts?\\
In this case, we can think of the available donuts as the following multiset: 
$S = \{4\cdot C, \infty \cdot J, \infty \cdot G\}$ To count the number of combinations of 6 elements of this multiset, we will use the rule for complements. We will count the number of ways to select 6 donuts that violate the restriction and subtract from the total (which we found in example 1).  Further, the violation of the restriction on the chocolate donuts can be partitioned into two possibilities- 5 chocolate donuts and 6 chocolate donuts- so we will use the sum rule to count these violations.\\
The number of combinations of 6 donuts consisting of 6 chocolate donuts is 1. This is obvious.  The number of combinations of 6 donuts consisting of exactly 5 chocolate donuts is 2: 5C, 1J and 5C, 1G.  Hence there are a grand total of $1+2 =3$
ways to violate the restriction that there were only 4 chocolate donuts available.  That leaves the total number of combinations of 6 donuts as $C(8,6) -3 = 28 - 3 = 25$.
Hence there are 25 ways to select a half a dozen donuts from this convenience store.
\end{example}


\begin{problem}(problem 2)
A bakery has 5 types of donuts: Boston cream, chocolate, glazed, jelly and plain.
Each type of donut is in abundant supply except for the chocolate donuts, of which there are only 10. 
How many ways are there to select a dozen donuts under these conditions? $\; \answer{1815}$
\end{problem}


\begin{example}[example 3]
A convenience store sells donuts of three types: chocolate, jelly and glazed.  
If each type is in abundant supply, how many ways are there to select half a 
dozen donuts if you must have at least one of each type?\\
Since one of each type must be included, this problem boils down to selecting the 
remaining 3 donuts from among the 4 types. We have 3 stars and 3 bars, so
the number of ways to do this is $C(6, 3) = 20$.
\end{example}

\begin{problem}(problem 3a)
A bakery has 5 types of donuts, each in abundant supply. How many ways are there to select a dozen donuts if you must have at least one of each type? $\; \answer{330}$
\end{problem}

\begin{problem}(problem 3a)
A bakery has 5 types of donuts (including chocolate), each in abundant supply. How many ways are there to select a dozen donuts if you must have at least two chocolate donuts and at least one of each other type? $\; \answer{210}$
\end{problem}

We now turn to examples involving the number of solutions to an equation, under the assumption that 
the variables must represent whole numbers.

\begin{example}[example 4]
Find the number of solutions to the the equation
\[
x_1 + x_2 + x_3 + x_4 = 10
\]
if each $x_i$ must be a whole number between 0 and 10.\\
Note that this problem is equivalent to the problem of selecting 10 donuts if there are 4 types, each in abundant supply. In this case, there are 10 stars and 3 bars (one less than the number of types).  Hence the number of solutions is 
\[
C(13, 10) = \frac{13!}{10! 3!} = \frac{13 \cdot 12 \cdot 11}{3 \cdot 2 \cdot 1} = 286
\]
\end{example}

\begin{problem}(problem 4)
How many solutions are there to the equation
\[
x_1 + x_2 + x_3 + x_4 +x_5 = 8
\]
if each variable $x_i$ must be a whole number between 0 and 8? $\; \answer{495}$
\end{problem}

We summarize the stars and bars method in the following proposition.

\begin{proposition}[Stars and Bars]
Given a multiset of the form $S = \{n_1 \cdot a_1, n_2 \cdot a_2, \ldots, n_k \cdot a_k\}$, 
the number of combinations of $m$ elements of the set (where $m \leq |S|$) is given by
$C(m+k-1, m)$.
\end{proposition}
\begin{proof}
A combination of $m$ elements of $S$ can be thought of as a permutation of stars and bars. 
The number of stars is equal to the number of elements selected, $m$. 
The number of bars needed to separate the $m$ objects into $k$ different types is $k-1$. 
Altogether, the number of stars plus bars is $m + k-1$. 
The number of permutations of the $m$ stars and $k-1$ bars can be thought of as 
the number of combinations of $m+k-1$ objects taken $m$ at a time, i.e. $(C, m+k-1,m)$. 
\end{proof}

\end{document}

